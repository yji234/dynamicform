[{"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/DragSource.tsx":"1","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/DragTarget.tsx":"2","/Users/tal/yji234/my/dynamic-form/dynamicform/src/route/index.tsx":"3","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/view/FormList.tsx":"4","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/view/ConfigBaseInfo.tsx":"5","/Users/tal/yji234/my/dynamic-form/dynamicform/src/account/component/MenuList.tsx":"6","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/OperateButton.tsx":"7","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/view/CreateFormSetAttr.tsx":"8","/Users/tal/yji234/my/dynamic-form/dynamicform/src/layout/NavLayout.tsx":"9","/Users/tal/yji234/my/dynamic-form/dynamicform/src/common/utils.ts":"10","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/api/index.ts":"11","/Users/tal/yji234/my/dynamic-form/dynamicform/src/menu/view/MenuManage.tsx":"12","/Users/tal/yji234/my/dynamic-form/dynamicform/src/menu/component/AddEditMenu.tsx":"13","/Users/tal/yji234/my/dynamic-form/dynamicform/src/review/view/Review.tsx":"14","/Users/tal/yji234/my/dynamic-form/dynamicform/src/review/api/index.ts":"15","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/api/dragdrop.ts":"16","/Users/tal/yji234/my/dynamic-form/dynamicform/src/review/view/Manage.tsx":"17","/Users/tal/yji234/my/dynamic-form/dynamicform/src/menu/api/index.ts":"18","/Users/tal/yji234/my/dynamic-form/dynamicform/src/account/view/Login.tsx":"19","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/SetAttr.tsx":"20","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/SetOptions.tsx":"21","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/api/formattr.ts":"22","/Users/tal/yji234/my/dynamic-form/dynamicform/src/common/request.ts":"23","/Users/tal/yji234/my/dynamic-form/dynamicform/src/index.tsx":"24","/Users/tal/yji234/my/dynamic-form/dynamicform/src/layout/BlankLayout.tsx":"25"},{"size":1911,"mtime":1609815893513,"results":"26","hashOfConfig":"27"},{"size":5667,"mtime":1610015191920,"results":"28","hashOfConfig":"27"},{"size":3899,"mtime":1609918747056,"results":"29","hashOfConfig":"27"},{"size":6852,"mtime":1610015190227,"results":"30","hashOfConfig":"27"},{"size":3154,"mtime":1609918796993,"results":"31","hashOfConfig":"27"},{"size":4178,"mtime":1610007887830,"results":"32","hashOfConfig":"27"},{"size":1396,"mtime":1609918168166,"results":"33","hashOfConfig":"27"},{"size":1991,"mtime":1609918103797,"results":"34","hashOfConfig":"27"},{"size":731,"mtime":1609405320654,"results":"35","hashOfConfig":"27"},{"size":2621,"mtime":1609319053467,"results":"36","hashOfConfig":"27"},{"size":1072,"mtime":1610007335911,"results":"37","hashOfConfig":"27"},{"size":5862,"mtime":1609816366294,"results":"38","hashOfConfig":"27"},{"size":4612,"mtime":1609816343545,"results":"39","hashOfConfig":"27"},{"size":9164,"mtime":1610289734612,"results":"40","hashOfConfig":"27"},{"size":1557,"mtime":1610290998176,"results":"41","hashOfConfig":"27"},{"size":445,"mtime":1610013317789,"results":"42","hashOfConfig":"27"},{"size":5291,"mtime":1610288767836,"results":"43","hashOfConfig":"27"},{"size":985,"mtime":1610007319460,"results":"44","hashOfConfig":"27"},{"size":1211,"mtime":1610006142403,"results":"45","hashOfConfig":"27"},{"size":5259,"mtime":1610015605850,"results":"46","hashOfConfig":"27"},{"size":2159,"mtime":1609922191718,"results":"47","hashOfConfig":"27"},{"size":1046,"mtime":1610015262543,"results":"48","hashOfConfig":"27"},{"size":1332,"mtime":1609318882630,"results":"49","hashOfConfig":"27"},{"size":596,"mtime":1609317691549,"results":"50","hashOfConfig":"27"},{"size":362,"mtime":1609397729221,"results":"51","hashOfConfig":"27"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1mgh1ai",{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"69"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/DragSource.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/DragTarget.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/route/index.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/view/FormList.tsx",["106"],"import React, {\n  FC,\n  useState,\n  useCallback,\n  useEffect,\n} from 'react';\nimport {\n  Table,\n  Button,\n  Pagination,\n  message,\n  Modal,\n} from 'antd';\nimport moment from 'moment';\nimport { ColumnsType } from 'antd/es/table';\nimport { useHistory } from 'react-router-dom';\nimport copy from 'copy-to-clipboard'\nimport { getFormList, deleteForm, modifyStatus } from '../api';\nimport { getFormListById } from '../api/formattr';\nimport ConfigBaseInfo from './ConfigBaseInfo';\n\nexport interface FormListItem {\n  key: number;\n  taskId: string;\n  taskName: string;\n  totalNum: number;\n  unMarkNum: number;\n  markNum: number;\n  inspectNum: number;\n  inspectNoPassNum: number;\n  status: number;\n}\n\nexport interface PaginationParams{\n  pageNum: number;\n  pageSize: number;\n  totalCount: number;\n}\n\nconst FormList: FC<{}> = () => {\n  const columns: ColumnsType<FormListItem> = [\n    {\n      key: 'name',\n      title: '表单名称（单击复制formId）',\n      render: (item) => (\n        <Button type=\"link\" color=\"#1890ff\" onClick={() => handleCopyFormId(item._id)}>{item.name}</Button>\n      )\n    },\n    {\n      key: 'desc',\n      title: '表单描述',\n      dataIndex: 'desc',\n    },\n    {\n      key: 'status',\n      title: '状态',\n      render: (item) => (\n        <span>\n          {\n            item.status\n              ? <span style={{ color: '#0b8235' }}>启用</span>\n              : <span style={{ color: '#d9d9d9' }}>禁用</span>\n          }\n        </span>\n      ),\n    },\n    {\n      key: 'create_time',\n      title: '创建时间',\n      render: (item) => (\n        <span>{moment(item.create_time).format('YYYY-MM-DD HH:mm:ss')}</span>\n      ),\n    },\n    {\n      key: 'update_time',\n      title: '修改时间',\n      render: (item) => (\n        <span>{item.update_time ? moment(item.update_time).format('YYYY-MM-DD HH:mm:ss') : '-'}</span>\n      ),\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (item) => (\n        <>\n          <Button\n            type=\"primary\"\n            size=\"small\"\n            disabled={!item.status}\n            onClick={() => handleModify(item)}\n            style={{ marginRight: '10px' }}\n          >\n          修改\n          </Button>\n          <Button\n            type=\"primary\"\n            size=\"small\"\n            onClick={() => handleReview(item)}\n            style={{ marginRight: '10px', border: '0px' }}\n          >\n            预览\n          </Button>\n          <Button\n            type=\"primary\"\n            size=\"small\"\n            onClick={() => handleChangeStatus(item)}\n            style={{ marginRight: '10px', background: !item.status ? '#0b8235' : '#ff4d4f', border: '0px' }}\n          >\n            {!item.status ? '启用' : '禁用'}\n          </Button>\n          <Button\n            type=\"primary\"\n            size=\"small\"\n            disabled={item.status}\n            onClick={() => handleDelete(item)}\n          >\n          删除\n          </Button>\n        </>\n      ),\n    },\n  ];\n  const [data, setData] = useState<FormListItem[]>();\n  const [pagination, setPagination] = useState<PaginationParams>({\n    pageNum: 1,\n    pageSize: 10,\n    totalCount: 0,\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [selectedItem, setSelectedItem] = useState<FormListItem>();\n  const history = useHistory();\n\n  const handleCopyFormId = useCallback((value) => {\n    copy(value);\n    message.info('formId复制成功')\n  }, []);\n\n  const handleReview = useCallback((item) => {\n    getFormListById({ parentId: item._id }).then((res) => {\n      sessionStorage.setItem('forms', JSON.stringify(res.data))\n      // history.push(`/formother/review/${item._id}`);\n      window.open(`/formother/review/${item._id}`);\n    })\n  }, [history]);\n\n  const handleGetFormList = useCallback((params?) => {\n    setLoading(true);\n    const sendParmas = {\n      pageNum: (params && params.pageNum) || pagination.pageNum,\n      pageSize: (params && params.pageSize) || pagination.pageSize,\n    };\n    getFormList(sendParmas).then((res: any) => {\n      const resData = [...res.data];\n      resData.forEach((item: any) => {\n        item.key = item._id;\n      });\n      if (resData.length > 0) {\n        setData([...resData]);\n        setPagination({ ...res.pagination });\n      } else {\n        setData([...res.data]);\n        setPagination({\n          pageNum: 1,\n          pageSize: 10,\n          totalCount: 0,\n        });\n      }\n      setLoading(false);\n    });\n  }, [pagination]);\n\n  const handleModifyStatusAxios = useCallback((id, status) => {\n    modifyStatus({id, status}).then((res: any) => {\n      message.success(res.message || '修改成功');\n      handleGetFormList();\n    });\n  }, [handleGetFormList]);\n\n  const handleChangeStatus = useCallback((item: any) => {\n    Modal.confirm({\n      title: '确认修改',\n      icon: '',\n      content: '您确认要修改状态吗？',\n      onOk() {\n        handleModifyStatusAxios(item._id, !item.status);\n      },\n    });\n  }, [handleModifyStatusAxios]);\n\n  const handleModify = useCallback((item) => {\n    setSelectedItem(item);\n  }, []);\n\n  const handleDeleteAxios = useCallback((id) => {\n    deleteForm({id}).then((res: any) => {\n      message.success(res.message || '删除成功');\n      handleGetFormList();\n    });\n  }, [handleGetFormList]);\n\n  const handleDelete = useCallback((item) => {\n    Modal.confirm({\n      title: '确认删除',\n      icon: '',\n      content: '您确认要删除吗？',\n      onOk() {\n        handleDeleteAxios(item._id);\n      },\n    });\n  }, [handleDeleteAxios]);\n\n  const handleShowPageChange = (page: number, pageSizes: any): void => {\n    const params = {\n      pageNum: page,\n      pageSize: pageSizes,\n    };\n    setPagination({ ...pagination, ...params });\n    handleGetFormList(params);\n  };\n\n  const handleShowSizeChange = (current: number, pageSizes: number): void => {\n    const params = {\n      pageNum: current,\n      pageSize: pageSizes,\n    };\n    setPagination({ ...pagination, ...params });\n    handleGetFormList(params);\n  };\n\n  useEffect(() => {\n    handleGetFormList();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <div className=\"form-list\">\n      <ConfigBaseInfo modifyItem={selectedItem}/>\n      <Table<FormListItem>\n        columns={columns}\n        dataSource={data}\n        pagination={false}\n        loading={loading}\n        style={{ marginBottom: '20px' }}\n      />\n      <Pagination\n        showQuickJumper\n        current={pagination.pageNum}\n        defaultCurrent={pagination.pageNum}\n        defaultPageSize={pagination.pageSize}\n        total={pagination.totalCount}\n        showTotal={(total) => `共 ${total} 条`}\n        onChange={handleShowPageChange}\n        onShowSizeChange={handleShowSizeChange}\n        style={{ textAlign: 'right' }}\n      />\n    </div>\n  );\n};\n\nexport default FormList;\n","/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/view/ConfigBaseInfo.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/account/component/MenuList.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/OperateButton.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/view/CreateFormSetAttr.tsx",[],["107","108"],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/layout/NavLayout.tsx",[],["109","110"],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/common/utils.ts",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/api/index.ts",[],["111","112"],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/menu/view/MenuManage.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/menu/component/AddEditMenu.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/review/view/Review.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/review/api/index.ts",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/api/dragdrop.ts",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/review/view/Manage.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/menu/api/index.ts",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/account/view/Login.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/SetAttr.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/component/SetOptions.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/forms/api/formattr.ts",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/common/request.ts",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/index.tsx",[],"/Users/tal/yji234/my/dynamic-form/dynamicform/src/layout/BlankLayout.tsx",[],{"ruleId":"113","severity":1,"message":"114","line":144,"column":6,"nodeType":"115","endLine":144,"endColumn":15,"suggestions":"116"},{"ruleId":"117","replacedBy":"118"},{"ruleId":"119","replacedBy":"120"},{"ruleId":"117","replacedBy":"121"},{"ruleId":"119","replacedBy":"122"},{"ruleId":"117","replacedBy":"123"},{"ruleId":"119","replacedBy":"124"},"react-hooks/exhaustive-deps","React Hook useCallback has an unnecessary dependency: 'history'. Either exclude it or remove the dependency array.","ArrayExpression",["125"],"no-native-reassign",["126"],"no-negated-in-lhs",["127"],["126"],["127"],["126"],["127"],{"desc":"128","fix":"129"},"no-global-assign","no-unsafe-negation","Update the dependencies array to be: []",{"range":"130","text":"131"},[3640,3649],"[]"]